<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
  <title>{{ app_name or "Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†" }}</title>

  <!-- ÙØ§ÙÙŠÙƒÙˆÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ Ù…Ø¹ Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
  <link rel="icon" type="image/jpeg" href="{{ ui_favicon_url or '/static/images/favicon.jpg' }}">
  <link rel="apple-touch-icon" href="{{ ui_favicon_url or '/static/images/favicon.jpg' }}">
  <link rel="shortcut icon" href="{{ ui_favicon_url or '/static/images/favicon.jpg' }}" type="image/jpeg">

  <!-- Ø®Ø·ÙˆØ·Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠØ© -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=IBM+Plex+Sans+Arabic:wght@400;600;700&family=Noto+Kufi+Arabic:wght@500;700&display=swap" rel="stylesheet">

  <!-- Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ØªØ§ÙŠÙ„ -->
  <link rel="stylesheet" href="/static/css/app.css">
  <link rel="stylesheet" href="/static/css/custom.css"><!-- Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø¥Ù† ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ custom.css -->

  <!-- Ø£Ù†Ù…Ø§Ø· Ù…Ø³Ø§Ø¹Ø¯Ø© Ø®ÙÙŠÙØ© Ù„Ù„Ù‚ÙˆØ§Ø¦Ù… ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª -->
  <style>
    :root { --container: 1100px; }
    .container { max-width: var(--container); margin: 0 auto; padding: 0 12px; }

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
    .main-nav {
      background: #1f2937; color: #fff;
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .main-nav .nav-inner {
      display: flex; gap: 10px; align-items: center; padding: 10px 12px;
      max-width: var(--container); margin: 0 auto;
    }
    .main-nav a { color:#fff; text-decoration:none; padding:6px 10px; border-radius:8px; }
    .main-nav a:hover { background: rgba(255,255,255,.08); }
    .btn-link { background: transparent; color: #fff; border: 0; cursor: pointer; padding: 6px 10px; border-radius: 8px; }
    .btn-link:hover { background: rgba(255,255,255,.08); }

    /* Ù…Ø³Ø§ÙØ© Ø¯Ø§ÙØ¹Ø© Ù„Ù„Ø¹Ù†Ø§ØµØ± ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø± Ø­Ø³Ø¨ RTL */
    .nav-spacer { margin-inline-start: auto; }

    /* Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ£Ø¯ÙˆØ§Øª Ø¹Ø§Ù…Ø© (Ù„Ø·ÙŠÙØ© ÙˆØ®ÙÙŠÙØ©) */
    .card { background:#fff; border:1px solid #eee; border-radius:14px; padding:14px; margin-bottom:12px; }
    .card-head { display:flex; align-items:center; gap:8px; margin-bottom:10px; }
    .card-icon { font-size:1.2rem; }
    .alert { padding:10px 12px; border-radius:10px; margin:10px 0; }
    .alert-success { background:#ecfdf5; color:#065f46; border:1px solid #a7f3d0; }
    .alert-danger { background:#fef2f2; color:#991b1b; border:1px solid #fecaca; }
    .form label { display:flex; flex-direction:column; gap:6px; }
    .form input, .form select, .form textarea {
      padding:8px 10px; border:1px solid #e6e6e6; border-radius:10px; font-family:inherit;
    }
    .grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    .actions { display:flex; gap:8px; align-items:center; }
    .btn { padding:8px 12px; border-radius:10px; border:0; cursor:pointer; }
    .btn-primary { background:#2563eb; color:#fff; }
    .btn-secondary { background:#e5e7eb; color:#111827; }
    .muted { color:#6b7280; }

    /* ØªØ­Ø¬ÙŠÙ… Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© */
    main.container { padding-top: 16px; padding-bottom: 24px; }
    .breadcrumb { color:#6b7280; font-size:.92rem; margin-top:8px; }

    /* ØªÙƒÙŠÙ‘Ù Ø§Ù„Ø´Ø¹Ø§Ø± Ù…Ø¹ Ø§Ù„Ø³Ø·Ø± */
    .site-header .header-inner { display:flex; align-items:center; gap:14px; padding: 12px 0; }
    .site-header .logo { height: 220px; width: auto; }
    .site-header .site-title { margin:0; font-weight:700; }

    /* ÙÙˆØªØ± Ø£Ù†ÙŠÙ‚ */
    .site-footer { background:#f9fafb; padding:12px 0; text-align:center; font-size:.9rem; color:#4b5563; }
  </style>
</head>
<body>
  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header class="site-header">
    <div class="topband"></div>
    <div class="container header-inner">
      {% if ui_logo_url %}
        <img src="{{ ui_logo_url }}" alt="{{ app_name or 'Logo' }}" class="logo">
      {% else %}
        <img src="/static/images/logo.jpg" alt="{{ app_name or 'Logo' }}" class="logo">
      {% endif %}
      <div class="titles">
        <h1 class="site-title">{{ app_name or "Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†" }}</h1>
        <div class="breadcrumb">{% block breadcrumb %}{% endblock %}</div>
      </div>
    </div>
  </header>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø­Ø³Ø¨ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
  <nav class="main-nav">
    <div class="nav-inner">
      <a href="/">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

      {# Ù†Ù‚Ø±Ø£ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ø¨Ø§Ø´Ø±Ø© (Ù‚Ø§Ù…ÙˆØ³) #}
      {% set cu = request.session.get('user') %}
      {% set display_name = (cu.get('full_name') if cu and cu.get('full_name') else (cu.get('username') if cu and cu.get('username') else 'Ù…Ø³ØªØ®Ø¯Ù…')) %}

      {% if cu %}
        {# Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø­Ø³Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª #}
        {% if cu.get('is_hod') %}
          <a href="/hod/">ğŸ“‹ Ù„ÙˆØ­Ø© Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù…</a>
          <a href="/hod/courses">ğŸ“š Ø§Ù„Ø¯ÙˆØ±Ø§Øª</a>
          <a href="/hod/courses/new">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø©</a>
        {% endif %}

        {% if cu.get('is_college_admin') %}
          <a href="/admin/">ğŸ“‹ Ù„ÙˆØ­Ø© Ø£Ø¯Ù…Ù† Ø§Ù„ÙƒÙ„ÙŠØ©</a>
          <a href="/hod/courses">ğŸ“š Ø§Ù„Ø¯ÙˆØ±Ø§Øª</a>
          <a href="/hod/courses/new">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø©</a>
          <a href="/hod/skills-record">ğŸ“‘ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</a>
        {% endif %}

        {% if cu.get('is_admin') %}
          <a href="/admin/">ğŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</a>

          <!-- Ø§Ù„Ù…Ø²ÙŠØ¯ Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© -->
          <div class="nav-more">
            <button type="button">Ø§Ù„Ù…Ø²ÙŠØ¯ â–¾</button>
            <div class="more-menu">
              <a href="/admin/users">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a>
              <a href="/admin/departments">ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</a>
              <a href="/admin/colleges">ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙ„ÙŠØ§Øª</a>
              <a href="/admin/settings">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
              <a href="/admin/excel-data">ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Excel</a>
              <a href="/admin/audit">ğŸ“œ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</a>
              <a href="/admin/backup">ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</a>
            </div>
          </div>
        {% endif %}

        {# ğŸ‘‡ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©/Ø§Ù„Ù…Ø®Ø²ÙˆÙ†/Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ ØªØ¸Ù‡Ø± Ù„Ù…Ù† Ù„Ø¯ÙŠÙ‡ is_doc #}
        {% if cu.get('is_doc') %}
          <a href="/clinic/">ğŸ¥ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</a>
          <a href="/inventory/">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</a>
          <a href="/first-aid/">ğŸ§° ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø¥Ø³Ø¹Ø§ÙØ§Øª</a>
        {% endif %}

        <!-- Ø¯Ø§ÙØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„ÙŠØ³Ø§Ø± (RTL) -->
        <div class="nav-spacer"></div>

        <!-- Ø§Ù„ØªØ­ÙŠØ© + Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ + Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ -->
        <div class="navbar-right">
          <span class="greeting">Ù…Ø±Ø­Ø¨Ù‹Ø§ {{ display_name }}</span>
          <a href="/profile/" class="btn-link" title="Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ">ğŸ‘¤ Ù…Ù„ÙÙŠ</a>
          <form method="post" action="/auth/logout" style="margin:0;">
            <button class="btn-link btn-logout" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">ğŸšª Ø®Ø±ÙˆØ¬</button>
          </form>
        </div>
      {% else %}
        <!-- Ø²Ø§Ø¦Ø± ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„ -->
        <div class="nav-spacer"></div>
        <a href="/auth/login">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
      {% endif %}
    </div>
  </nav>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <!-- Ø§Ù„ÙÙˆØªØ±: Ù†Øµ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù…Ø¹ Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
  <footer class="site-footer">
    <div class="container">
      <small>
        {{ ui_footer or "Â© Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØªÙ‚Ù†ÙŠ ÙˆØ§Ù„Ù…Ù‡Ù†ÙŠ â€“ Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø¨Ù†Ø¬Ø±Ø§Ù† â€“ Ù†Ø¸Ø§Ù… Guidxus Ù„Ø¥Ø¯Ø§Ø±Ø© Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†" }}
      </small>
    </div>
  </footer>

  <!-- Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
  <script src="/static/js/app.js"></script>
</body>
</html>

