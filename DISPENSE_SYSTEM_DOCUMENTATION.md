# ๐ฅ ูุธุงู ุตุฑู ุงูุฃุฏููุฉ ูุตูุงุฏูู ุงูุฅุณุนุงูุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฌุฏูุฏ ูุชูุงูู ูุตุฑู ุงูุฃุฏููุฉ ูู ุงููุณุชูุฏุน ูุงูุตูุฏููุฉ ุฅูู ุตูุงุฏูู ุงูุฅุณุนุงูุงุช ูุน ุชุชุจุน ุงููุฎุฒูู ุชููุงุฆูุงู.

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

โ **ุนุฒู ุงููุณุคูููุงุช**:
- ุตูุญุฉ ุตูุงุฏูู ุงูุฅุณุนุงูุงุช: **ุนุฑุถ ุงููุญุชููุงุช ููุท** (ูุง ุชูุฌุฏ ุฅุถุงูุฉ ุฃุฏููุฉ ูุจุงุดุฑุฉ)
- ุตูุญุฉ ุงููุณุชูุฏุน: **ุตุฑู ุงูุฃุฏููุฉ** ุฅูู ุงูุตูุงุฏูู

โ **ุชุชุจุน ุงููุฎุฒูู ุงูุชููุงุฆู**:
- ุนูุฏ ุตุฑู ุฏูุงุก: ูุชู ุฎุตู ุงููููุฉ ูู **warehouse_stock** ู **pharmacy_stock** ุชููุงุฆูุงู
- ุงูุชุญุฏูุซ ูุธูุฑ ูุจุงุดุฑุฉ ูู ุฌุฏุงูู ุงููุณุชูุฏุน
- ุชุณุฌูู ุดุงูู ููู ูุนุงููุฉ ูู ุฌุฏูู drug_transactions

โ **ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณููุฉ**:
- ุฌุฏูู ุงูุฃุฏููุฉ ูุนุฑุถ ุงูุฑุตูุฏ ุงูุญุงูู (ุฃุญูุฑ ุฅุฐุง ูุงู ููุฎูุถุงู)
- ูููุฐุฌ ุตุฑู ุจุณูุท: ุงุฎุชุฑ ุฏูุงุก + ุตูุฏูู + ูููุฉ = ุตุฑู
- ุงูุจุญุซ ุงูุณุฑูุน ุนู ุงูุฃุฏููุฉ
- ุชูุจููุงุช ุชุญุฐูุฑูุฉ ูููููุงุช ุบูุฑ ุงููุงููุฉ

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูู ุตูุญุฉ ุตูุงุฏูู ุงูุฅุณุนุงูุงุช (ุงููุณุชุฎุฏู ุงูุนุงุฏู):
1. ุงูุฏุฎูู ุฅูู **ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ** โ **ุงูุตูุงุฏูู**
2. ุงุฎุชูุงุฑ ุตูุฏูู ูุนุฑุถ ูุญุชููุงุชู
3. ูููู ุญุฐู ุนูุตุฑ (ุณูุชู ุฅุฑุฌุงุน ุงููููุฉ ูููุฎุฒู)

### ูู ุตูุญุฉ ุงููุณุชูุฏุน (ูุณุคูู ุงููุฎุฒูู):
1. ุงูุฏุฎูู ุฅูู **ุงููุฎุฒูู ุงูุทุจู** โ **ุตุฑู ุงูุฃุฏููุฉ** (ุงูุฃููููุฉ ุงูุฃููู)
2. ูู ุงููุณู ุงูุฃูุณุฑ: **ูุงุฆูุฉ ุงูุฃุฏููุฉ** ุงููุงููุฉ
3. ูู ุงููุณู ุงูุฃููู: **ูููุฐุฌ ุงูุตุฑู**
4. ุงูุฎุทูุงุช:
   - ุงุฎุชุฑ ุฏูุงุก ูู ุงูุฌุฏูู (ุงุถุบุท ุฒุฑ "ุงุฎุชุฑ")
   - ุงุฎุชุฑ ุงูุตูุฏูู ุงููุฑุงุฏ ุงูุตุฑู ูู
   - ุฃุฏุฎู ุงููููุฉ ุงููุฑุงุฏ ุตุฑููุง
   - ุงุถุบุท **"ุตุฑู ุงูุฏูุงุก"**

## ๐ ุงูุจูุงูุงุช ุงูุชู ุชุชุบูุฑ ุชููุงุฆูุงู

### ุนูุฏ ุงูุตุฑู (ูุซุงู):
```
ุงูุฏูุงุก: Panadol
ุงููููุฉ: 3 ูุญุฏุงุช

ูุจู ุงูุตุฑู:
- warehouse_stock: 5
- pharmacy_stock: 5

ุจุนุฏ ุงูุตุฑู:
- warehouse_stock: 2 โ
- pharmacy_stock: 2 โ
- first_aid_box_items: ุฅุถุงูุฉ 3 ูุญุฏุงุช Panadol ููุตูุฏูู
- drug_transactions: ุชุณุฌูู ุงููุนุงููุฉ (warehouse_to_box)
```

### ุนูุฏ ุงูุญุฐู ูู ุงูุตูุฏูู:
```
ุงููุณุชุฎุฏู ูุญุฐู ุงูุฏูุงุก ูู ุตูุฏูู ุงูุฅุณุนุงูุงุช
โ
ูุชู ุฅุฑุฌุงุน ุงููููุฉ ุฅูู warehouse_stock ู pharmacy_stock
โ
ุชุณุฌูู ูุนุงููุฉ ูู ููุน "box_return"
```

## ๐ ุฌุฏุงูู ุงููุฎุฒูู

### 1. `drugs` - ูุงุฆูุฉ ุงูุฃุฏููุฉ ุงูุฃุณุงุณูุฉ
```
id | drug_code | trade_name | generic_name | strength | form | unit
1  | 1         | Panadol    | Paracetamol  | 500 mg   | ุญุจุฉ  | ุนุฏุฏ
2  | 2         | Brufen     | Ibuprofen    | 200 mg   | ุญุจุฉ  | ุนุฏุฏ
...
```

### 2. `warehouse_stock` - ุฑุตูุฏ ุงููุณุชูุฏุน
```
drug_id | balance_qty | last_updated
1       | 5           | 2025-12-02
2       | 3           | 2025-12-02
...
```

### 3. `pharmacy_stock` - ุฑุตูุฏ ุงูุตูุฏููุฉ
```
drug_id | balance_qty | last_updated
1       | 5           | 2025-12-02
2       | 3           | 2025-12-02
...
```

### 4. `drug_transactions` - ุณุฌู ุงููุนุงููุงุช
```
id | drug_id | transaction_type | quantity_change | source | destination | notes | created_at
1  | 1       | warehouse_to_box | -3              | ...    | box_1       | ...   | ...
2  | 1       | box_return       | +1              | box_1  | warehouse   | ...   | ...
...
```

### 5. `first_aid_box_items` - ูุญุชููุงุช ุงูุตูุงุฏูู
```
id | box_id | drug_code | drug_name | quantity | unit | added_at
1  | 1      | 1         | Panadol   | 3        | ุนุฏุฏ  | ...
2  | 1      | 2         | Brufen    | 2        | ุนุฏุฏ  | ...
...
```

## ๐ ุงููุณุงุฑุงุช API ุงูุฌุฏูุฏุฉ

### GET `/inventory/dispense-drugs`
- ุนุฑุถ ุตูุญุฉ ุตุฑู ุงูุฃุฏููุฉ
- ูุนุฑุถ ุฌููุน ุงูุฃุฏููุฉ ูุน ุฃุฑุตุฏุชูุง
- ูุนุฑุถ ูุงุฆูุฉ ุงูุตูุงุฏูู ุงููุชุงุญุฉ

### POST `/inventory/dispense-drugs/process`
- ูุนุงูุฌุฉ ุตุฑู ุงูุฏูุงุก
- ุงููุนุงููุงุช:
  - ุฎุตู ูู `warehouse_stock`
  - ุฎุตู ูู `pharmacy_stock`
  - ุฅุถุงูุฉ ุฅูู `first_aid_box_items`
  - ุชุณุฌูู ูู `drug_transactions`
- ุงููุนุงููุงุช ูุนุงู (Atomic) - ุฅูุง ุชูุฌุญ ูููุง ุฃู ุชูุดู

## โ๏ธ ุงูุชุบููุฑุงุช ุงููุฑุฆูุฉ ูู ุงููุงุฌูุฉ

### ุตูุญุฉ ุตูุงุฏูู ุงูุฅุณุนุงูุงุช (/first-aid/boxes/{box_id}):
**ูุจู:**
- ุฒุฑ "ุฅุถุงูุฉ ุฏูุงุก" ูู ุฑุฃุณ ุงูุฌุฏูู

**ุจุนุฏ:**
- โ ุชู ุฅุฒุงูุฉ ุงูุฒุฑ
- โ ุฑุณุงูุฉ ุชูุถูุญูุฉ: "ูููู ุฅุถุงูุฉ ุงูุฃุฏููุฉ ูู ุตูุญุฉ ุงููุณุชูุฏุน"
- โ ูู ูุง ูุชุจูู: ุนุฑุถ ุงูุจูุงูุงุช ูุญุฐู ุงูุนูุงุตุฑ

### ุตูุญุฉ ุงููุณุชูุฏุน (/inventory):
**ูุจู:**
- ูุง ุชูุฌุฏ ุฎูุงุฑุงุช ููุตุฑู

**ุจุนุฏ:**
- โ ุฃููููุฉ ุฌุฏูุฏุฉ "๐ ุตุฑู ุงูุฃุฏููุฉ" ูู ุงูุฃุนูู
- โ ุชูุชุญ ุตูุญุฉ ูุงููุฉ ุจุฌุฏูู ุงูุฃุฏููุฉ ููููุฐุฌ ุงูุตุฑู

## ๐งช ุงูุงุฎุชุจุงุฑ

ุชู ุชุดุบูู ุงุฎุชุจุงุฑ ุดุงูู (`test_dispense_system.py`) ุจูุฌุงุญ:
- โ ุฌูุจ ุงูุฃุฏููุฉ ูุน ุฃุฑุตุฏุชูุง
- โ ุฌูุจ ุงูุตูุงุฏูู
- โ ูุญุงูุงุฉ ุตุฑู 3 ูุญุฏุงุช ูู Panadol
- โ ุชุญูู ูู ุงูุฎุตู ูู warehouse: 5 โ 2
- โ ุชุญูู ูู ุงูุฎุตู ูู pharmacy: 5 โ 2
- โ ุชุญูู ูู ุฅุถุงูุฉ ุงูุนูุตุฑ ููุตูุฏูู
- โ ุชุญูู ูู ุชุณุฌูู ุงููุนุงููุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฎุตู ุขูู**: ุนูุฏ ุงูุตุฑู ูุชู ุงูุฎุตู ููุฑุงู ูู ุงููุณุชูุฏุน ูุงูุตูุฏููุฉ ูุนุงู
2. **ุงูุญุฐู ูู ุงูุตูุฏูู**: ูุนูุฏ ุงููููุฉ ูููุณุชูุฏุน ูุงูุตูุฏููุฉ
3. **ุงูุชุญูู ูู ุงููููุฉ**: ุงููุธุงู ูุฑูุน ูุญุงููุฉ ุงูุตุฑู ุฅุฐุง ูุงูุช ุงููููุฉ ุงููุชุงุญุฉ ุฃูู ูู ุงููุทููุจุฉ
4. **ุงูุณุฌู ุงูุดุงูู**: ูู ูุนุงููุฉ ุชูุณุฌู ูู drug_transactions ูุน ุงูุชุงุฑูุฎ ูุงูููุช

## ๐ ุงูุฃูุงู

- โ ุฌููุน ุงููุณุงุฑุงุช ุชุชุทูุจ ุชุณุฌูู ุงูุฏุฎูู (`require_doc`)
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุฏูุงุก ูุงูุตูุฏูู ูุจู ุงูุตุฑู
- โ ููุน ุงูุตุฑู ุจูููุงุช ุฃูุซุฑ ูู ุงููุชุงุญ

---

**ุชู ุฅุทูุงู ุงููุธุงู ุจูุฌุงุญ! ๐**
