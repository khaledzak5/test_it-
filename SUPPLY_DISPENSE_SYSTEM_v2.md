# ๐ ูุธุงู ุฅุฏุงุฑุฉ ุญุฑูุงุช ุงูุฃุฏููุฉ - ุงูุฅุตุฏุงุฑ ุงููุญุณูู

## ๐ฏ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### โจ ูุงุฌูุฉ ููุญุฏุฉ ุจุชุจููุจุงุช
- **ุชุจููุจ 1: ุตุฑู ุงูุฃุฏููุฉ** ๐
- **ุชุจููุจ 2: ุชูุฑูุฏ ุงูุฃุฏููุฉ** ๐ฆ

ุชู ุฏูุฌ ุงูุนูููุชูู ูู ุตูุญุฉ ูุงุญุฏุฉ (`/inventory/stock-moves`) ูุน ุชุจููุจุงุช ุณููุฉ ุงูุงุณุชุฎุฏุงู

---

## ๐ ุนูููุงุช ูุชุงุญุฉ ุงูุขู

### 1๏ธโฃ ุตุฑู ุงูุฃุฏููุฉ ูุตูุงุฏูู ุงูุฅุณุนุงูุงุช

**ุงููุณุงุฑ:** `/inventory/stock-moves` โ ุชุจููุจ "ุตุฑู ุงูุฃุฏููุฉ"

**ุงูุฎุทูุงุช:**
1. ุนุฑุถ ุฌุฏูู ูุงูู ููุฃุฏููุฉ ูุน ุฃุฑุตุฏุฉ ุงููุณุชูุฏุน ูุงูุตูุฏููุฉ
2. ุงุฎุชูุงุฑ ุฏูุงุก ูู ุงูุฌุฏูู
3. ุงุฎุชูุงุฑ ุงูุตูุฏูู ุงููุฑุงุฏ ุงูุตุฑู ูู
4. ุฅุฏุฎุงู ุงููููุฉ ุงููุฑุงุฏ ุตุฑููุง
5. ุงูุถุบุท ุนูู "ุตุฑู ุงูุฏูุงุก"

**ุงููุชูุฌุฉ:**
- โ ุฎุตู ูู `warehouse_stock`
- โ ุฎุตู ูู `pharmacy_stock`
- โ ุฅุถุงูุฉ ููุตูุฏูู ูู `first_aid_box_items`
- โ ุชุณุฌูู ุงููุนุงููุฉ ูู `drug_transactions` (ููุน: `warehouse_to_box`)

---

### 2๏ธโฃ ุชูุฑูุฏ ุงูุฃุฏููุฉ ูููุณุชูุฏุน

**ุงููุณุงุฑ:** `/inventory/stock-moves` โ ุชุจููุจ "ุชูุฑูุฏ ุงูุฃุฏููุฉ"

**ุงูุฎุทูุงุช:**
1. ุนุฑุถ ุฌุฏูู ุงูุฃุฏููุฉ
2. ุงุฎุชูุงุฑ ุฏูุงุก ูู ุงูุฌุฏูู
3. ุฅุฏุฎุงู ุงููููุฉ ุงููุฑุงุฏ ุชูุฑูุฏูุง
4. ุฅุถุงูุฉ ููุงุญุธุงุช (ุงุฎุชูุงุฑู) - ูุซุงู: "ูุงุฑุฏ ูู ุงููุณุชูุฏุน ุงูุฑุฆูุณู"
5. ุงูุถุบุท ุนูู "ุชูุฑูุฏ ุงูุฏูุงุก"

**ุงููุชูุฌุฉ:**
- โ ุฅุถุงูุฉ ููู `warehouse_stock`
- โ ุฅุถุงูุฉ ููู `pharmacy_stock`
- โ ุชุณุฌูู ุงููุนุงููุฉ ูู `drug_transactions` (ููุน: `supply_received`)

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช

### ุนูููุฉ ุงูุตุฑู:
```
ุงุฎุชูุงุฑ ุฏูุงุก + ุตูุฏูู + ูููุฉ
        โ
POST /inventory/dispense-drugs/process
        โ
UPDATE warehouse_stock (qty -)
UPDATE pharmacy_stock (qty -)
INSERT first_aid_box_items (qty +)
INSERT drug_transactions
        โ
REDIRECT /inventory/stock-moves?msg=drug_dispensed_successfully
```

### ุนูููุฉ ุงูุชูุฑูุฏ:
```
ุงุฎุชูุงุฑ ุฏูุงุก + ูููุฉ + ููุงุญุธุงุช
        โ
POST /inventory/supply-drugs/process
        โ
UPDATE warehouse_stock (qty +)
UPDATE pharmacy_stock (qty +)
INSERT drug_transactions
        โ
REDIRECT /inventory/stock-moves?msg=drug_supplied_successfully
```

---

## ๐พ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุณุชุฎุฏูุฉ

### 1. `drugs` - ูุนูููุงุช ุงูุฃุฏููุฉ
```sql
SELECT id, drug_code, trade_name, generic_name, strength, form, unit FROM drugs
```

### 2. `warehouse_stock` - ุฑุตูุฏ ุงููุณุชูุฏุน
```sql
UPDATE warehouse_stock SET balance_qty = balance_qty +/- quantity
```

### 3. `pharmacy_stock` - ุฑุตูุฏ ุงูุตูุฏููุฉ
```sql
UPDATE pharmacy_stock SET balance_qty = balance_qty +/- quantity
```

### 4. `first_aid_box_items` - ูุญุชููุงุช ุงูุตูุงุฏูู (ููุตุฑู ููุท)
```sql
INSERT INTO first_aid_box_items (box_id, drug_code, drug_name, quantity, unit)
```

### 5. `drug_transactions` - ุณุฌู ุฌููุน ุงููุนุงููุงุช
```sql
INSERT INTO drug_transactions (drug_id, transaction_type, quantity_change, source, destination, notes, created_at)
-- transaction_type: 'warehouse_to_box' ุฃู 'supply_received'
```

---

## ๐จ ุชุญุณููุงุช ุงููุงุฌูุฉ

### ุฌุฏูู ุงูุฃุฏููุฉ
- ๐ ุงูุจุญุซ ุงูุณุฑูุน ุนู ุงูุฃุฏููุฉ
- ๐จ ุชูููุฒ ุงููููุงุช ุงูููุฎูุถุฉ (ุฃุญูุฑ)
- ๐ ุนุฑุถ ุงูุฃุฑุตุฏุฉ ุงูุญุงููุฉ

### ูููุฐุฌ ุงูุตุฑู/ุงูุชูุฑูุฏ
- โ ุชุญุฏูุซ ุชููุงุฆู ูููุนูููุงุช ุนูุฏ ุงุฎุชูุงุฑ ุฏูุงุก
- โ๏ธ ุชุญุฐูุฑ ุนูุฏ ูุญุงููุฉ ุตุฑู ูููุฉ ุฃูุซุฑ ูู ุงููุชุงุญ
- ๐ ุชูุนูู/ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุญุณุจ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ

### ุฑุณุงุฆู ุงููุฌุงุญ
- โ "ุชู ุตุฑู ุงูุฏูุงุก ุจูุฌุงุญ ูุชู ุฎุตู ุงููููุฉ ูู ุงููุณุชูุฏุน ูุงูุตูุฏููุฉ!"
- โ "ุชู ุชูุฑูุฏ ุงูุฏูุงุก ุจูุฌุงุญ ูุชู ุฅุถุงูุฉ ุงููููุฉ ูููุณุชูุฏุน ูุงูุตูุฏููุฉ!"

---

## ๐ ุฃููุงุน ุงููุนุงููุงุช (transaction_type)

| ุงูููุน | ุงููุตู | ุงููููุฉ | ุงููุตุฏุฑ | ุงููุฌูุฉ |
|------|-------|--------|--------|-------|
| `warehouse_to_box` | ุตุฑู ููุตูุฏูู | ุณุงูุจ | warehouse_pharmacy | box_X |
| `supply_received` | ุชูุฑูุฏ ุฌุฏูุฏ | ููุฌุจ | external_supplier | warehouse_pharmacy |
| `box_return` | ุฅุฑุฌุงุน ูู ุตูุฏูู | ููุฌุจ | box_X | warehouse_pharmacy |

---

## ๐ ุงููุณุงุฑุงุช API

### ุตูุญุฉ ุนุฑุถ ุงูุญุฑูุงุช (ุงููุงุฌูุฉ):
```
GET /inventory/stock-moves
GET /inventory/stock-moves?msg=drug_dispensed_successfully
GET /inventory/stock-moves?msg=drug_supplied_successfully
```

### ูุนุงูุฌุฉ ุงูุตุฑู:
```
POST /inventory/dispense-drugs/process
Query Parameters:
  - drug_id (int)
  - box_id (int)
  - quantity (int)
```

### ูุนุงูุฌุฉ ุงูุชูุฑูุฏ:
```
POST /inventory/supply-drugs/process
Query Parameters:
  - drug_id (int)
  - quantity (int)
  - notes (string, optional)
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฎุตู ุงูุขูู**: ุนูุฏ ุงูุตุฑู ูุชู ุงูุฎุตู ูู ุงููุณุชูุฏุน ูุงูุตูุฏููุฉ ูุนุงู ููุฑุงู
2. **ุงูุชูุฑูุฏ ุงูุขูู**: ุนูุฏ ุงูุชูุฑูุฏ ูุชู ุงูุฅุถุงูุฉ ูููุณุชูุฏุน ูุงูุตูุฏููุฉ ูุนุงู ููุฑุงู
3. **ุงูุญูุงูุฉ ูู ุงูุฃุฎุทุงุก**: ูููู ููุน ุงูุตุฑู ุฅุฐุง ูุงูุช ุงููููุฉ ุบูุฑ ูุงููุฉ
4. **ุงูุชุณุฌูู ุงููุงูู**: ูู ูุนุงููุฉ ูุณุฌูุฉ ูุน ุงูุชุงุฑูุฎ ูุงูููุงุญุธุงุช

---

## โ ุงุฎุชุจุงุฑ ุงููุธุงู

ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจูุฌุงุญ:
- โ ุตุฑู 2 ูุญุฏุฉ Panadol
- โ ุชูุฑูุฏ 5 ูุญุฏุงุช Brufen
- โ ุงูุชุญูู ูู ุงูุฎุตู ูู ุงูุฌุฏุงูู
- โ ุงูุชุญูู ูู ุชุณุฌูู ุงููุนุงููุงุช

---

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
